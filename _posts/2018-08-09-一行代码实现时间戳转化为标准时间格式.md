---
layout: post
title: 一行代码实现时间戳转化为标准时间格式
---

前端常常需要将时间转化为标准时间供用户参考，笨方法就是将年月日时分秒一个个算出来

~~~
function transformTime(timestamp) {
    if (timestamp) {
        var time = new Date(timestamp);
        var y = time.getFullYear();
        var M = time.getMonth() + 1;
        var d = time.getDate();
        var h = time.getHours();
        var m = time.getMinutes();
        var s = time.getSeconds();
        return y + '-' + addZero(M) + '-' + addZero(d) + ' ' + addZero(h) + ':' + addZero(m) + ':' + addZero(s);
      } else {
          return '';
      }
}
function addZero(m) {
    return m < 10 ? '0' + m : m;
}
~~~

上面的方法，通过对时间戳转换为Date实例，利用Date方法获取对应的年月日，时分秒，其中，还是需要注意对小于10的数，添加字符串‘0’，转换诸如‘2018-08-08 12:09:12’这种简单易懂的时间格式。前段时间，部门大佬告知了另外一种方式，一行代码完成时间戳转换为‘YYYY-MM-DD HH:mm:ss’形式的时间格式，顿时觉得js能够了解的内容还有很多，话不多说，亮出代码

~~~
function time(time = +new Date()) {
    var date = new Date(time + 8 * 3600 * 1000);
    return date.toJSON().substr(0, 16).replace('T', ' ');
}
time();
~~~

Date的‘toJSON’方法返回格林威治时间的字符串形如‘2018-08-09T10:20:54.396Z’，格式已经很接近我们需要转化的时间格式了，我们只需要取前16位字符串为，然后需要把‘T’过滤，即是标准的时间格式。格式也可以稍稍优化。

~~~
function time(time = +new Date()) {
    var date = new Date(time + 8 * 3600 * 1000);
    return date.toJSON().substr(0, 16).replace('T', ' ').replace(/-/g, '.');
}
time();
~~~

把时间中的‘-’修改为‘.’或者其他需要的字符串都是可以的。这样代码量比以前省了不止一星半点的，读起来也方便多了。
